# Generated by Django 2.2.8 on 2020-06-23 12:02

from django.db import migrations
from django.db.models import Q


def converts_data_source(apps, schema_editor):
    # We get the model from the versioned app registry;
    # if we directly import it, it'll be the wrong version
    RegistrationDataImport = apps.get_model(
        "registration_data", "RegistrationDataImport"
    )
    RegistrationDataImport.objects.filter(~Q(data_source="XLS")).update(
        data_source="KOBO"
    )


class Migration(migrations.Migration):

    dependencies = [
        ("registration_data", "0004_migration"),
    ]

    operations = [migrations.RunPython(converts_data_source)]
