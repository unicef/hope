{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta description="hope,hct,dashboard">
        <meta charset="UTF-8">
        <meta keywords="hope,dashboard,unicef">
        <title>{% translate "Payment Dashboard" %}</title>
        <script src="{% static 'dashboard/d3.min.js' %}"></script>
        <script src="{% static 'dashboard/crossfilter.min.js' %}"></script>
        <script src="{% static 'dashboard/dc.min.js' %}"></script>
        <script src="{% static 'dashboard/d3-scale-chromatic.v1.min.js' %}"></script>
        <link rel="stylesheet" href="{% static 'dashboard/dc.min.css' %}" />
        <link href="{% static 'dashboard/tailwind.min.css' %}" rel="stylesheet">
        <style>
        .dc-chart .deselected {
            opacity: 0.3;
        }

        #month-chart {
            width: 100%;
            height: 400px;
        }

        .max-w-7xl {
            width: 100%;
            margin: 0 auto;
        }

        .sidebar {
            width: 250px;
            background-color: #ff6f00;
            /* vibrant orange */
            color: white;
            height: 100vh;
            padding-top: 20px;
            position: fixed;
            top: 0;
            left: 0;
            transition: width 0.3s ease-in-out;
        }

        .sidebar.collapsed {
            width: 80px;
            /* collapsed width */
        }

        .sidebar a {
            padding: 10px;
            text-decoration: none;
            color: white;
            display: block;
            margin: 10px 0;
            transition: padding-left 0.3s ease-in-out;
        }

        .sidebar a:hover {
            background-color: #ff9800;
            /* light orange background */
        }

        .header-bar {
            width: calc(100% - 250px);
            background-color: #374151;
            /* dark background */
            color: white;
            position: fixed;
            top: 0;
            right: 0;
            height: 60px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            transition: width 0.3s ease-in-out;
        }

        .main-content {
            padding: 20px;
            transition: margin-left 0.3s ease-in-out;
        }

        .sidebar.collapsed~.header-bar {
            width: calc(100% - 80px);
        }

        .sidebar.collapsed~.main-content {
            margin-left: 80px;
        }

        .toggle-btn {
            position: absolute;
            top: 20px;
            left: 240px;
            background-color: #ff6f00;
            color: white;
            cursor: pointer;
            padding: 8px;
            transition: left 0.3s ease-in-out;
        }

        .collapsed .toggle-btn {
            left: 60px;
        }
        </style>
    </head>
    <body class="bg-gray-100">
        <div class="main-content max-w-7xl mx-auto p-4 space-y-8">
            <!-- Top Metrics -->
            <div class="grid grid-cols-3 gap-4">
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="text-lg font-semibold">Total Amount Paid</h3>
                    <div id="total-amount-paid" class="text-xl font-bold"></div>
                </div>
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="text-lg font-semibold">Number of Payments</h3>
                    <div id="number-of-payments" class="text-xl font-bold"></div>
                </div>
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="text-lg font-semibold">Outstanding Payment Amounts</h3>
                    <div id="total-local-currency" class="text-xl font-bold"></div>
                </div>
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="text-lg font-semibold">Households Reached</h3>
                    <div id="households-reached" class="text-xl font-bold"></div>
                </div>
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="text-lg font-semibold">PWD Reached</h3>
                    <div id="pwd-reached" class="text-xl font-bold"></div>
                </div>
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="text-lg font-semibold">{% translate "Children Reached" %}</h3>
                    <div id="children-reached" class="text-xl font-bold"></div>
                </div>
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="text-lg font-semibold">{% translate "Individuals Reached" %}</h3>
                    <div id="individuals-reached" class="text-xl font-bold"></div>
                </div>
            </div>
            <!-- Middle Section (Charts) -->
            <div class="grid grid-cols-3 gap-4">
                <!-- Payments by FSP -->
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="text-lg font-semibold">{% translate "Payments by FSP" %}</h3>
                    <div id="payments-by-fsp" class="dc-chart"></div>
                </div>
                <!-- Payments by Delivery Mechanism -->
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="text-lg font-semibold">{% translate "Payments by Delivery Mechanism" %}</h3>
                    <div id="payments-by-delivery" class="dc-chart"></div>
                </div>
                <!-- Payments by Sector -->
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="text-lg font-semibold">{% translate "Payments by Sector" %}</h3>
                    <div id="payments-by-sector" class="dc-chart"></div>
                </div>
                <!-- Volume by Programme Structure -->
                <div class="bg-white p-4 rounded shadow">
                    <h3 class="text-lg font-semibold">{% translate "Volume by Programme Structure" %}</h3>
                    <div id="volume-by-program" class="dc-chart"></div>
                </div>
            </div>
            <!-- Bottom Section (Verification) -->
            <div class="grid grid-cols-4 gap-4">
                <div class="bg-white p-4 rounded shadow text-center">
                    <h3 class="text-lg font-semibold">Reconciliation</h3>
                    <div class="text-green-500 text-xl font-bold reconciliation-percentage">%</div>
                    <p>{% translate "Payment records are reconciled" %}</p>
                </div>
                <div class="bg-white p-4 rounded shadow text-center">
                    <h3 class="text-lg font-semibold">{% translate "Pending Reconciliation" %}</h3>
                    <div class="text-red-500 text-xl font-bold pending-reconciliation-percentage">%</div>
                    <p>{% translate "Payments pending" %}</p>
                </div>
                <div class="bg-white p-4 rounded shadow text-center">
                    <h3 class="text-lg font-semibold">{% translate "Verified" %}</h3>
                    <div class="text-green-500 text-xl font-bold">%</div>
                    <p>{% translate "Payments verified" %}</p>
                </div>
                <div class="bg-white p-4 rounded shadow text-center">
                    <h3 class="text-lg font-semibold">{% translate "Sampling Sites Verified" %}</h3>
                    <div class="text-green-500 text-xl font-bold">%</div>
                    <p>{% translate "Verification of sampling sites" %}</p>
                </div>
            </div>
        </div>
        <script src="{% static 'dashboard/dashboard.js' %}"></script>
        <script>const householdDataUrl = "{{ household_data_url }}";</script>
    </body>
</html>
