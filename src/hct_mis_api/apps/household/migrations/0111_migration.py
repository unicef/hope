# Generated by Django 3.2.13 on 2022-07-19 12:08

from django.db import migrations


class Migration(migrations.Migration):

    dependencies = [
        ('household', '0110_migration'),
    ]

    operations = [
        migrations.RunSQL(
            sql='''
                  CREATE TRIGGER vector_column_trigger
                  BEFORE INSERT OR UPDATE OF observed_disability, full_name, vector_column
                  ON household_individual
                  FOR EACH ROW EXECUTE PROCEDURE
                  tsvector_update_trigger(
                    vector_column, 'pg_catalog.english', observed_disability, full_name
                  );

                  UPDATE household_individual SET vector_column = NULL;
                ''',

            reverse_sql='''
                  DROP TRIGGER IF EXISTS vector_column_trigger
                  ON household_individual;
                '''
        ),
    ]
